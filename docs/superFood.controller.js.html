<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: superFood.controller.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: superFood.controller.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const { SuperFood } = require('../models/superFood.model');
// eslint-disable-next-line import/order
const { ObjectID } = require('mongodb');

/**
 * Takes a user request and creates a new super food item
 *
 * @param {object } req The request object
 * @param {object} res The response object
 * @returns {object} new super food object
 */
// eslint-disable-next-line consistent-return
exports.create = (req, res) => {
  // Validation
  if (!req.body) {
    return res.status(400).send({
      message: 'Super Food content cannot be empty'
    });
  }

  // create super food item
  const superfood = new SuperFood({
    name: req.body.name,
    benefits: req.body.benefits,
    nutrients: req.body.nutrients,
    treatments: req.body.treatments,
    price: req.body.price
  });

  // save superFood model to database
  superfood.save().then((doc) => {
    res.send(doc);
  }).catch((err) => {
    res.status(500).send({
      message: err.message || 'Unable to save super food to database - please make sure body data is correct.'
    });
  });
};

/**
 * Takes a user request for all super food items, and returns result of search
 * to user.
 *
 * @param {object} req The request object
 * @param {object} res The response object all super food items
 */
exports.getAll = (req, res) => {
  SuperFood.find().then((superfoods) => {
    res.send({ superfoods });
  }).catch((err) => {
    res.status(500).send({
      message: err.message || 'Something went wrong unable to retrieve super food items.'
    });
  });
};

/**
 * Takes a user request for individual super food item, and returns result of search
 * to user.
 *
 * @param {object} req The request object
 * @param {object} res The response object
 * @returns {object} returns individual super food item
 */
/* eslint consistent-return:0 */
exports.findOne = (req, res) => {
  const { id } = req.params;

  // validate id
  if (!ObjectID.isValid(id)) {
    return res.status(404).send({
      message: 'Invalid id.'
    });
  }

  SuperFood.findById(id)
    .then((superfood) => {
      if (!superfood) {
        return res.status(404).send({
          message: `super Food item not found with this id ${id}`
        });
      }
      res.send({ superfood });
    }).catch((err) => {
      if (err.kind === ObjectID) {
        return res.status(404).send({
          message: `super Food item not found with this id ${id}`
        });
      }
      return res.status(500).send({
        message: `Something went wrong retrieving super food item with id.${id}`
      });
    });
};

/**
 *  Takes a user request to remove a super food item and returns removed item to user.
 *
 * @param {object} req The request object
 * @param {object} res The response object
 * @returns {object} returns individual super food item
 */
exports.delete = (req, res) => {
  const { id } = req.params;

  // validate id
  if (!ObjectID.isValid(id)) {
    return res.status(404).send({
      message: 'Invalid id.'
    });
  }

  SuperFood.findOneAndDelete(id).then((superfood) => {
    if (!superfood) {
      return res.status(404).send({
        message: `Cannot find super food item with id ${req.params.id}`
      });
    }
    res.send({ superfood });
  }).catch((err) => {
    if (err.kind === ObjectID) {
      return res.status(404).send({
        message: `Cannot find super food item with id ${req.params.id}`
      });
    }
    return res.status(500).send({
      message: `Could not delete super food item with id ${req.params.id}`
    });
  });
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#create">create</a></li><li><a href="global.html#delete">delete</a></li><li><a href="global.html#getAll">getAll</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.2</a> on Fri May 17 2019 12:51:18 GMT+0200 (Central European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
